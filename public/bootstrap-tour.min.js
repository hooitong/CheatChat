!function($,t){var e,o;return o=t.document,e=function(){function e(e){var o;try{o=t.localStorage}catch(n){o=!1}this._options=$.extend({name:"tour",steps:[],container:"body",keyboard:!0,storage:o,debug:!1,backdrop:!1,redirect:!0,orphan:!1,duration:!1,basePath:"",template:"<div class='popover'> <div class='arrow'></div> <h3 class='popover-title'></h3> <div class='popover-content'></div> <div class='popover-navigation'> <div class='btn-group'> <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button> <button class='btn btn-sm btn-default' data-role='next'>Next &raquo;</button> <button class='btn btn-sm btn-default' data-role='pause-resume' data-pause-text='Pause' data-resume-text='Resume'>Pause</button> </div> <button class='btn btn-sm btn-default' data-role='end'>End tour</button> </div> </div>",afterSetState:function(t,e){},afterGetState:function(t,e){},afterRemoveState:function(t){},onStart:function(t){},onEnd:function(t){},onShow:function(t){},onShown:function(t){},onHide:function(t){},onHidden:function(t){},onNext:function(t){},onPrev:function(t){},onPause:function(t,e){},onResume:function(t,e){}},e),this._force=!1,this._inited=!1,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return e.prototype.addSteps=function(t){var e,o,n;for(o=0,n=t.length;n>o;o++)e=t[o],this.addStep(e);return this},e.prototype.addStep=function(t){return this._options.steps.push(t),this},e.prototype.getStep=function(t){return null!=this._options.steps[t]?$.extend({id:"step-"+t,path:"",placement:"right",title:"",content:"<p></p>",next:t===this._options.steps.length-1?-1:t+1,prev:t-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[t]):void 0},e.prototype.init=function(t){return this._force=t,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(t){return function(){return t.showStep(t._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},e.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current&&(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)),this},e.prototype.next=function(){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showNextStep)},e.prototype.prev=function(){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showPrevStep)},e.prototype.goTo=function(t){var e;return e=this.hideStep(this._current),this._callOnPromiseDone(e,this.showStep,t)},e.prototype.end=function(){var e,n;return e=function(e){return function(n){return $(o).off("click.tour-"+e._options.name),$(o).off("keyup.tour-"+e._options.name),$(t).off("resize.tour-"+e._options.name),e._setState("end","yes"),e._inited=!1,e._force=!1,e._clearTimer(),null!=e._options.onEnd?e._options.onEnd(e):void 0}}(this),n=this.hideStep(this._current),this._callOnPromiseDone(n,e)},e.prototype.ended=function(){return!this._force&&!!this._getState("end")},e.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this.start()},e.prototype.pause=function(){var e;return e=this.getStep(this._current),e&&e.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,t.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=e.onPause?e.onPause(this,this._duration):void 0):this},e.prototype.resume=function(){var e;return e=this.getStep(this._current),e&&e.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||e.duration,this._timer=t.setTimeout(function(t){return function(){return t._isLast()?t.next():t.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=e.onResume&&this._duration!==e.duration?e.onResume(this,this._duration):void 0):this},e.prototype.hideStep=function(t){var e,o,n;return(n=this.getStep(t))?(this._clearTimer(),o=this._makePromise(null!=n.onHide?n.onHide(this,t):void 0),e=function(e){return function(o){var i;return i=$(n.element),i.data("bs.popover")||i.data("popover")||(i=$("body")),i.popover("destroy").removeClass("tour-"+e._options.name+"-element tour-"+e._options.name+"-"+t+"-element"),n.reflex&&i.css("cursor","").off("click.tour-"+e._options.name),n.backdrop&&e._hideBackdrop(),null!=n.onHidden?n.onHidden(e):void 0}}(this),this._callOnPromiseDone(o,e),o):void 0},e.prototype.showStep=function(t){var e,n,i,r;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(r=this.getStep(t))?(i=t<this._current,e=this._makePromise(null!=r.onShow?r.onShow(this,t):void 0),n=function(e){return function(n){var s,a;if(e.setCurrentStep(t),a=function(){switch({}.toString.call(r.path)){case"[object Function]":return r.path();case"[object String]":return this._options.basePath+r.path;default:return r.path}}.call(e),s=[o.location.pathname,o.location.hash].join(""),e._isRedirect(a,s))return void e._redirect(r,a);if(e._isOrphan(r)){if(!r.orphan)return e._debug("Skip the orphan step "+(e._current+1)+". Orphan option is false and the element doesn't exist or is hidden."),void(i?e._showPrevStep():e._showNextStep());e._debug("Show the orphan step "+(e._current+1)+". Orphans option is true.")}return r.backdrop&&e._showBackdrop(e._isOrphan(r)?void 0:r.element),e._scrollIntoView(r.element,function(){return e.getCurrentStep()===t?(null!=r.element&&r.backdrop&&e._showOverlayElement(r.element),e._showPopover(r,t),null!=r.onShown&&r.onShown(e),e._debug("Step "+(e._current+1)+" of "+e._options.steps.length)):void 0}),r.duration?e.resume():void 0}}(this),this._callOnPromiseDone(e,n),e):void 0},e.prototype.getCurrentStep=function(){return this._current},e.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},e.prototype._setState=function(t,e){var o,n;if(this._options.storage){n=""+this._options.name+"_"+t;try{this._options.storage.setItem(n,e)}catch(i){o=i,o.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(n,e)}return null==this._state&&(this._state={}),this._state[t]=e},e.prototype._removeState=function(t){var e;return this._options.storage?(e=""+this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},e.prototype._getState=function(t){var e,o;return this._options.storage?(e=""+this._options.name+"_"+t,o=this._options.storage.getItem(e)):null!=this._state&&(o=this._state[t]),(void 0===o||"null"===o)&&(o=null),this._options.afterGetState(t,o),o},e.prototype._showNextStep=function(){var t,e,o;return o=this.getStep(this._current),e=function(t){return function(e){return t.showStep(o.next)}}(this),t=this._makePromise(null!=o.onNext?o.onNext(this):void 0),this._callOnPromiseDone(t,e)},e.prototype._showPrevStep=function(){var t,e,o;return o=this.getStep(this._current),e=function(t){return function(e){return t.showStep(o.prev)}}(this),t=this._makePromise(null!=o.onPrev?o.onPrev(this):void 0),this._callOnPromiseDone(t,e)},e.prototype._debug=function(e){return this._options.debug?t.console.log("Bootstrap Tour '"+this._options.name+"' | "+e):void 0},e.prototype._isRedirect=function(t,e){return null!=t&&""!==t&&("[object RegExp]"==={}.toString.call(t)&&!t.test(e)||"[object String]"==={}.toString.call(t)&&t.replace(/\?.*$/,"").replace(/\/?$/,"")!==e.replace(/\/?$/,""))},e.prototype._redirect=function(t,e){return $.isFunction(t.redirect)?t.redirect.call(this,e):t.redirect===!0?(this._debug("Redirect to "+e),o.location.href=e):void 0},e.prototype._isOrphan=function(t){return null==t.element||!$(t.element).length||$(t.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==$(t.element)[0].namespaceURI},e.prototype._isLast=function(){return this._current<this._options.steps.length-1},e.prototype._showPopover=function(t,e){var o,n,i,r,s,a;return $(".tour-"+this._options.name).remove(),a=$.extend({},this._options),i=$($.isFunction(t.template)?t.template(e,t):t.template),n=i.find(".popover-navigation"),s=this._isOrphan(t),s&&(t.element="body",t.placement="top",i=i.addClass("orphan")),o=$(t.element),i.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+e),o.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+e+"-element"),t.options&&$.extend(a,t.options),t.reflex&&!s&&o.css("cursor","pointer").on("click.tour-"+this._options.name,function(t){return function(){return t._isLast()?t.next():t.end()}}(this)),t.prev<0&&n.find("[data-role='prev']").addClass("disabled"),t.next<0&&n.find("[data-role='next']").addClass("disabled"),t.duration||n.find("[data-role='pause-resume']").remove(),t.template=i.clone().wrap("<div>").parent().html(),o.popover({placement:t.placement,trigger:"manual",title:t.title,content:t.content,html:!0,animation:t.animation,container:t.container,template:t.template,selector:t.element}).popover("show"),r=o.data("bs.popover")?o.data("bs.popover").tip():o.data("popover").tip(),r.attr("id",t.id),this._reposition(r,t),s?this._center(r):void 0},e.prototype._reposition=function(t,e){var n,i,r,s,a,u,p;if(s=t[0].offsetWidth,i=t[0].offsetHeight,p=t.offset(),a=p.left,u=p.top,n=$(o).outerHeight()-p.top-t.outerHeight(),0>n&&(p.top=p.top+n),r=$("html").outerWidth()-p.left-t.outerWidth(),0>r&&(p.left=p.left+r),p.top<0&&(p.top=0),p.left<0&&(p.left=0),t.offset(p),"bottom"===e.placement||"top"===e.placement){if(a!==p.left)return this._replaceArrow(t,2*(p.left-a),s,"left")}else if(u!==p.top)return this._replaceArrow(t,2*(p.top-u),i,"top")},e.prototype._center=function(e){return e.css("top",$(t).outerHeight()/2-e.outerHeight()/2)},e.prototype._replaceArrow=function(t,e,o,n){return t.find(".arrow").css(n,e?50*(1-e/o)+"%":"")},e.prototype._scrollIntoView=function(e,o){var n,i,r,s,a,u;return n=$(e),n.length?(i=$(t),s=n.offset().top,u=i.height(),a=Math.max(0,s-u/2),this._debug("Scroll into view. ScrollTop: "+a+". Element offset: "+s+". Window height: "+u+"."),r=0,$("body,html").stop(!0,!0).animate({scrollTop:Math.ceil(a)},function(t){return function(){return 2===++r?(o(),t._debug("Scroll into view. Animation end element offset: "+n.offset().top+". Window height: "+i.height()+".")):void 0}}(this))):o()},e.prototype._onResize=function(e,o){return $(t).on("resize.tour-"+this._options.name,function(){return clearTimeout(o),o=setTimeout(e,100)})},e.prototype._initMouseNavigation=function(){var t;return t=this,$(o).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)",function(t){return function(e){return e.preventDefault(),t.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)",function(t){return function(e){return e.preventDefault(),t.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(t){return function(e){return e.preventDefault(),t.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(e){var o;return e.preventDefault(),o=$(this),o.text(o.data(t._paused?"pause-text":"resume-text")),t._paused?t.resume():t.pause()})},e.prototype._initKeyboardNavigation=function(){return this._options.keyboard?$(o).on("keyup.tour-"+this._options.name,function(t){return function(e){if(e.which)switch(e.which){case 39:return e.preventDefault(),t._isLast()?t.next():t.end();break;case 37:if(e.preventDefault(),t._current>0)return t.prev();break;case 27:return e.preventDefault(),t.end()}}}(this)):void 0},e.prototype._makePromise=function(t){return t&&$.isFunction(t.then)?t:null},e.prototype._callOnPromiseDone=function(t,e,o){return t?t.then(function(t){return function(n){return e.call(t,o)}}(this)):e.call(this,o)},e.prototype._showBackdrop=function(t){return this.backdrop.backgroundShown?void 0:(this.backdrop=$("<div/>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,$("body").append(this.backdrop))},e.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},e.prototype._hideBackground=function(){return this.backdrop?(this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1):void 0},e.prototype._showOverlayElement=function(t){var e,o,n;return o=$(t),o&&0!==o.length&&!this.backdrop.overlayElementShown?(this.backdrop.overlayElementShown=!0,e=$("<div/>"),n=o.offset(),n.top=n.top,n.left=n.left,e.width(o.innerWidth()).height(o.innerHeight()).addClass("tour-step-background").offset(n),o.addClass("tour-step-backdrop"),$("body").append(e),this.backdrop.$element=o,this.backdrop.$background=e):void 0},e.prototype._hideOverlayElement=function(){return this.backdrop.overlayElementShown?(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1):void 0},e.prototype._clearTimer=function(){return t.clearTimeout(this._timer),this._timer=null,this._duration=null},e}(),t.Tour=e}(jQuery,window);